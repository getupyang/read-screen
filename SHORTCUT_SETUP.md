# ⚡️ iOS 快捷指令配置指南 (Snapshot AI)

为了实现“无感采集”，我们需要极致压缩上传时间。本指南将帮助你配置一个能在 1-2 秒内完成上传的快捷指令。

## 🎯 核心目标
*   **输入**：iOS Share Sheet (分享菜单) 中的图像。
*   **处理**：压缩至 < 100KB。
*   **输出**：上传至云端，并震动反馈。

## 🛠️ 步骤详解 (请对照手机修改)

### 1. 接收输入
*   **设置**：在“共享表单”中显示。
*   **接收类型**：勾选 **图像** 和 **媒体** (Safari 截图有时被视为 Safari 页面，需确保接收图像)。
*   **如果**：如果没有输入，**停止并响应**。

### 2. 图像预处理 (速度的关键 🚀)
这是最重要的一步。截图默认是 PNG 格式，体积巨大。我们需要强制转为 JPEG。

*   **动作 1**: `调整图像大小` (Resize Image)
    *   **对象**: `快捷指令输入`
    *   **大小**: 宽度设为 **1080** (高度自动)。
    *   *说明*: 1080p 对 AI 识别文字绰绰有余。

*   **动作 2**: `转换图像` (Convert Image)
    *   **对象**: `调整大小后的图像`
    *   **格式**: **JPEG**
    *   **质量**: **0.5** (滑动条拖到中间)。
    *   **保留元数据 (Preserve Metadata)**: **关闭 (OFF)**。
    *   *说明*: 这一步能将 1MB 的截图压缩到 50KB-100KB。关掉元数据有助于进一步减小体积和保护隐私。**不要省略此步！**

*   **动作 3**: `Base64 编码` (Base64 Encode)
    *   **对象**: `转换后的图像`
    *   **换行**: **无** (None)。

### 3. 上传云端 (API Request)

*   **动作 4**: `获取 URL 的内容` (Get Contents of URL)
    *   **URL**: `https://read-screen.vercel.app/api/analyze` (请替换为你的实际 Vercel 域名)
    *   **方法**: **POST**
    *   **头部 (Headers)**:
        *   `Content-Type`: `application/json`
    *   **请求体 (Request Body)**: 选择 **JSON**
        *   添加新字段 `image`: 值为 `Base64 编码` (来自上一步的变量)。
        *   (可选) 添加字段 `source`: 值为 `ios_shortcut`。

### 4. 反馈 (Feedback)

*   **动作 5**: `震动设备` (Vibrate Device)
    *   *说明*: **强烈推荐**。震动一下代表后台搞定了，完全不打断你的阅读流程。
    
*   **动作 6 (请删除)**: `快速查看` (Quick Look)
    *   *说明*: **请删除此步骤**。它会弹窗挡住屏幕，必须手动关闭，体验很差。

---

## 📸 预期效果
1.  在小红书截图。
2.  点击分享 -> "Snapshot AI"。
3.  手机轻微震动 (耗时约 1-2 秒)。
4.  顶部进度条迅速走完消失。
5.  继续刷小红书。

## ❓ 常见问题
*   **Q: 进度条卡在 1/4 不动？**
    *   A: 通常是因为图片太大正在编码，或者正在尝试建立网络连接。请确保已执行“转换图像为 JPEG (0.5)”步骤。
*   **Q: 提示“请求超时”？**
    *   A: 检查 Vercel 函数是否已部署为 Edge Runtime (我们的代码已更新，应该是秒回的)。
